[% INCLUDE header.tmpl page_title="Group Page"
   navigation=[ { url => 'group/', name => 'Groups' },
                { name => group.gid() },
              ]
%]

[% IF c.is_admin %]
<div id="actions">
<h2>Actions</h2>
<form action="[% c.url('group/' _ group.gid) %]" method="post">
<p><input type="submit" value="Delete Group">
<input type="hidden" name="_method" value="delete"></p>
</form>
</div> <!-- end actions -->
[% END %]

<h1>Group [% group.name() | html %]</h1>

[% FOREACH u IN DBIxRel(group.users).sort('name') %]
[% '<p>The following users are members of this group:</p><ul>' IF loop.first() %]
<li><a href="[% c.url('user/' _ u.uid()) %]">[% u.name() | html %]</a></li>
[% '</ul>' IF loop.last() %]
[% END %]

[% FOREACH r IN DBIxRel(group.w_repos).sort('name') %]
[% '<p>The group has write access to the following repositories:</p><ul>' IF loop.first() %]
<li><a href="[% c.url('repo/' _ r.name()) %]">[% r.name() | html %]</a></li>
[% '</ul>' IF loop.last() %]
[% END %]

[% FOREACH r IN DBIxRel(group.r_repos).sort('name') %]
[% '<p>The group has read access to the following repositories:</p><ul>' IF loop.first() %]
<li><a href="[% c.url('repo/' _ r.name()) %]">[% r.name() | html %]</a></li>
[% '</ul>' IF loop.last() %]
[% END %]


[% INCLUDE footer.tmpl %]
